import{_ as E}from"./ValaxyMain.vue_vue_type_style_index_0_lang-CJwb-j0h.js";import{_ as i,u as y,c as d,w as n,p as F,o as u,a as s,b as l,d as a,r as t,e as h}from"./app-t0WzKcrM.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-CJldLY-7.js";import"./YunCard.vue_vue_type_script_setup_true_lang-CgAMBqk4.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-CQr6kV1W.js";import"./index-C7yU5XnD.js";const m="/assets/webpackProNewProject-BO62k5aU.png",b="/assets/webpackProCssIndependence-CF3pw3Bs.png",C="/assets/webpackProCssNetwork-D1IHS-_T.png",g="/assets/webpackProCssBrowserslist-BToFjdYx.png",_="/assets/webpackProCompatibleCss-CJKKnhX5.png",k="/assets/webpackProCssCompatibleDist-BRM1aaZj.png",B="/assets/webpackProCssCompress-6e7EZpqq.png",j="/assets/webpackAddJsCompatible-CcfUetJu.png",v="/assets/webpackProJsCompatible-BFWqztOt.png",f="/assets/webpackProJsPromise-BwUPUHXN.png",Zs=JSON.parse('{"title":"webpack实战——配置生产环境","description":"","frontmatter":{"title":"webpack实战——配置生产环境","date":"2021-05-01T00:00:00.000Z","categories":["工具"],"tags":["Webpack"]},"headers":[{"level":2,"title":"前言","slug":"前言","link":"#前言","children":[]},{"level":2,"title":"处理样式文件","slug":"处理样式文件","link":"#处理样式文件","children":[{"level":3,"title":"提取 CSS 成单独文件","slug":"提取-css-成单独文件","link":"#提取-css-成单独文件","children":[]},{"level":3,"title":"CSS 兼容性处理","slug":"css-兼容性处理","link":"#css-兼容性处理","children":[]},{"level":3,"title":"压缩 CSS","slug":"压缩-css","link":"#压缩-css","children":[]}]},{"level":2,"title":"处理 js 文件","slug":"处理-js-文件","link":"#处理-js-文件","children":[{"level":3,"title":"js 语法检查","slug":"js-语法检查","link":"#js-语法检查","children":[]},{"level":3,"title":"js 兼容性处理","slug":"js-兼容性处理","link":"#js-兼容性处理","children":[]},{"level":3,"title":"js 的压缩","slug":"js-的压缩","link":"#js-的压缩","children":[]}]},{"level":2,"title":"处理 html","slug":"处理-html","link":"#处理-html","children":[]}],"relativePath":"pages/posts/webpack-pro/index.md","path":"/home/runner/work/xzc-blog/xzc-blog/pages/posts/webpack-pro/index.md","lastUpdated":1709257929000}'),c=JSON.parse('{"title":"webpack实战——配置生产环境","description":"","frontmatter":{"title":"webpack实战——配置生产环境","date":"2021-05-01T00:00:00.000Z","categories":["工具"],"tags":["Webpack"]},"headers":[{"level":2,"title":"前言","slug":"前言","link":"#前言","children":[]},{"level":2,"title":"处理样式文件","slug":"处理样式文件","link":"#处理样式文件","children":[{"level":3,"title":"提取 CSS 成单独文件","slug":"提取-css-成单独文件","link":"#提取-css-成单独文件","children":[]},{"level":3,"title":"CSS 兼容性处理","slug":"css-兼容性处理","link":"#css-兼容性处理","children":[]},{"level":3,"title":"压缩 CSS","slug":"压缩-css","link":"#压缩-css","children":[]}]},{"level":2,"title":"处理 js 文件","slug":"处理-js-文件","link":"#处理-js-文件","children":[{"level":3,"title":"js 语法检查","slug":"js-语法检查","link":"#js-语法检查","children":[]},{"level":3,"title":"js 兼容性处理","slug":"js-兼容性处理","link":"#js-兼容性处理","children":[]},{"level":3,"title":"js 的压缩","slug":"js-的压缩","link":"#js-的压缩","children":[]}]},{"level":2,"title":"处理 html","slug":"处理-html","link":"#处理-html","children":[]}],"relativePath":"pages/posts/webpack-pro/index.md","path":"/home/runner/work/xzc-blog/xzc-blog/pages/posts/webpack-pro/index.md","lastUpdated":1709257929000}'),D={name:"pages/posts/webpack-pro/index.md",data(){return{data:c,frontmatter:c.frontmatter,$frontmatter:c.frontmatter}},setup(){const o=y();o.meta.frontmatter=Object.assign(o.meta.frontmatter,c.frontmatter),F("pageData",c)}},w={id:"前言",tabindex:"-1"},x=s("p",null,"之前我们已经学习了开发环境的搭建（不熟悉的同学请先去熟悉开发环境的搭建）。开发环境是将源代码经过 webpack 编译成浏览器能识别的语法，并输出成 bundle，同时为了让程序员更加轻松方便的进行项目开发，开发环境还做了一些自动化的工作。而生产环境我们在基础知识里讲过，是能让代码优化上线运行的环境，那么具体需要做哪些事情呢？",-1),A=s("p",null,"首先是样式资源的优化，之前我们将样式处理完后整合在 js 中，这样就会使 js 文件体积特别大，导致加载速度变慢。同时页面在加载中需要先加载 js 才能创建 style 标签将样式插入页面中，所以又会出现闪屏现象。所以我们需要将样式资源从 js 文件中提取出来。其次，我们还要将样式、js 代码等做兼容性处理，以此适配更多的运行环境。最后，我们需要对所有文件做代码压缩处理（注意不是压缩文件，是压缩代码），进一步的减小项目体积。除此以外，我们需要做的事还有很多，但总体而言我们的目标是：1. 让代码更快、更强、性能更好。2. 增强代码的稳定性，让代码可以在各个平台上平稳的运行。",-1),S={id:"处理样式文件",tabindex:"-1"},P={id:"提取-css-成单独文件",tabindex:"-1"},$=s("p",null,"我们重新创建一个项目，创建过程可以参考开发环境的文章。项目目录及文件内容如下：",-1),W=s("img",{src:m,alt:"webpackProNewProject"},null,-1),q=s("p",null,"接下来我们在根路径下新建 webpack.config.js 进行配置。先按之前开发环境的配置：",-1),N=s("div",{class:"language-javascript"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"javascript"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"const"),s("span",{style:{color:"#E1E4E8"}}," { "),s("span",{style:{color:"#79B8FF"}},"resolve"),s("span",{style:{color:"#E1E4E8"}}," } "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"require"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},'"path"'),s("span",{style:{color:"#E1E4E8"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"const"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"HtmlWebpackPlugin"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"require"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},'"html-webpack-plugin"'),s("span",{style:{color:"#E1E4E8"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#79B8FF"}},"module"),s("span",{style:{color:"#E1E4E8"}},"."),s("span",{style:{color:"#79B8FF"}},"exports"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  entry: "),s("span",{style:{color:"#9ECBFF"}},'"./src/js/index.js"'),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  output: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    filename: "),s("span",{style:{color:"#9ECBFF"}},'"js/main.js"'),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    path: "),s("span",{style:{color:"#B392F0"}},"resolve"),s("span",{style:{color:"#E1E4E8"}},"(__dirname, "),s("span",{style:{color:"#9ECBFF"}},'"dist"'),s("span",{style:{color:"#E1E4E8"}},"),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  module: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    rules: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        test:"),s("span",{style:{color:"#DBEDFF"}}," "),s("span",{style:{color:"#9ECBFF"}},"/"),s("span",{style:{color:"#85E89D","font-weight":"bold"}},"\\."),s("span",{style:{color:"#DBEDFF"}},"css"),s("span",{style:{color:"#F97583"}},"$"),s("span",{style:{color:"#9ECBFF"}},"/"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        use: ["),s("span",{style:{color:"#9ECBFF"}},'"style-loader"'),s("span",{style:{color:"#E1E4E8"}},", "),s("span",{style:{color:"#9ECBFF"}},'"css-loader"'),s("span",{style:{color:"#E1E4E8"}},"],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  plugins: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#F97583"}},"new"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"HtmlWebpackPlugin"),s("span",{style:{color:"#E1E4E8"}},"({")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      template: "),s("span",{style:{color:"#9ECBFF"}},'"./src/index.html"'),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    }),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  mode: "),s("span",{style:{color:"#9ECBFF"}},'"development"'),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"};")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"const"),s("span",{style:{color:"#24292E"}}," { "),s("span",{style:{color:"#005CC5"}},"resolve"),s("span",{style:{color:"#24292E"}}," } "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"require"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},'"path"'),s("span",{style:{color:"#24292E"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"const"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"HtmlWebpackPlugin"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"require"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},'"html-webpack-plugin"'),s("span",{style:{color:"#24292E"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#005CC5"}},"module"),s("span",{style:{color:"#24292E"}},"."),s("span",{style:{color:"#005CC5"}},"exports"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  entry: "),s("span",{style:{color:"#032F62"}},'"./src/js/index.js"'),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  output: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    filename: "),s("span",{style:{color:"#032F62"}},'"js/main.js"'),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    path: "),s("span",{style:{color:"#6F42C1"}},"resolve"),s("span",{style:{color:"#24292E"}},"(__dirname, "),s("span",{style:{color:"#032F62"}},'"dist"'),s("span",{style:{color:"#24292E"}},"),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  module: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    rules: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        test:"),s("span",{style:{color:"#032F62"}}," /"),s("span",{style:{color:"#22863A","font-weight":"bold"}},"\\."),s("span",{style:{color:"#032F62"}},"css"),s("span",{style:{color:"#D73A49"}},"$"),s("span",{style:{color:"#032F62"}},"/"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        use: ["),s("span",{style:{color:"#032F62"}},'"style-loader"'),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#032F62"}},'"css-loader"'),s("span",{style:{color:"#24292E"}},"],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  plugins: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"new"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"HtmlWebpackPlugin"),s("span",{style:{color:"#24292E"}},"({")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      template: "),s("span",{style:{color:"#032F62"}},'"./src/index.html"'),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    }),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  mode: "),s("span",{style:{color:"#032F62"}},'"development"'),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"};")])])]),s("button",{class:"collapse"})],-1),z=s("p",null,"配置完下载完包后我们进行打包，样式资源会在 js 文件中。提取样式资源为单独的文件需要用到 mini-css-extract-plugin，我们先下载这个包，然后在配置中使用：",-1),H=s("div",{class:"language-javascript"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"javascript"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"const"),s("span",{style:{color:"#E1E4E8"}}," { "),s("span",{style:{color:"#79B8FF"}},"resolve"),s("span",{style:{color:"#E1E4E8"}}," } "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"require"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},'"path"'),s("span",{style:{color:"#E1E4E8"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"const"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"HtmlWebpackPlugin"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"require"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},'"html-webpack-plugin"'),s("span",{style:{color:"#E1E4E8"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"const"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"MiniCssExtractPlugin"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"require"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},'"mini-css-extract-plugin"'),s("span",{style:{color:"#E1E4E8"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#79B8FF"}},"module"),s("span",{style:{color:"#E1E4E8"}},"."),s("span",{style:{color:"#79B8FF"}},"exports"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  entry: "),s("span",{style:{color:"#9ECBFF"}},'"./src/js/index.js"'),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  output: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    filename: "),s("span",{style:{color:"#9ECBFF"}},'"js/main.js"'),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    path: "),s("span",{style:{color:"#B392F0"}},"resolve"),s("span",{style:{color:"#E1E4E8"}},"(__dirname, "),s("span",{style:{color:"#9ECBFF"}},'"dist"'),s("span",{style:{color:"#E1E4E8"}},"),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  module: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    rules: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        test:"),s("span",{style:{color:"#DBEDFF"}}," "),s("span",{style:{color:"#9ECBFF"}},"/"),s("span",{style:{color:"#85E89D","font-weight":"bold"}},"\\."),s("span",{style:{color:"#DBEDFF"}},"css"),s("span",{style:{color:"#F97583"}},"$"),s("span",{style:{color:"#9ECBFF"}},"/"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        use: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"          "),s("span",{style:{color:"#6A737D"}},'// "style-loader",')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"          MiniCssExtractPlugin.loader,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"          "),s("span",{style:{color:"#9ECBFF"}},'"css-loader"'),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  plugins: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#F97583"}},"new"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"HtmlWebpackPlugin"),s("span",{style:{color:"#E1E4E8"}},"({")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      template: "),s("span",{style:{color:"#9ECBFF"}},'"./src/index.html"'),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    }),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#F97583"}},"new"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"MiniCssExtractPlugin"),s("span",{style:{color:"#E1E4E8"}},"({")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      filename: "),s("span",{style:{color:"#9ECBFF"}},'"css/main.css"'),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    }),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  mode: "),s("span",{style:{color:"#9ECBFF"}},'"development"'),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"};")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"const"),s("span",{style:{color:"#24292E"}}," { "),s("span",{style:{color:"#005CC5"}},"resolve"),s("span",{style:{color:"#24292E"}}," } "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"require"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},'"path"'),s("span",{style:{color:"#24292E"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"const"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"HtmlWebpackPlugin"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"require"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},'"html-webpack-plugin"'),s("span",{style:{color:"#24292E"}},");")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"const"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"MiniCssExtractPlugin"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"require"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},'"mini-css-extract-plugin"'),s("span",{style:{color:"#24292E"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#005CC5"}},"module"),s("span",{style:{color:"#24292E"}},"."),s("span",{style:{color:"#005CC5"}},"exports"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  entry: "),s("span",{style:{color:"#032F62"}},'"./src/js/index.js"'),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  output: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    filename: "),s("span",{style:{color:"#032F62"}},'"js/main.js"'),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    path: "),s("span",{style:{color:"#6F42C1"}},"resolve"),s("span",{style:{color:"#24292E"}},"(__dirname, "),s("span",{style:{color:"#032F62"}},'"dist"'),s("span",{style:{color:"#24292E"}},"),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  module: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    rules: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        test:"),s("span",{style:{color:"#032F62"}}," /"),s("span",{style:{color:"#22863A","font-weight":"bold"}},"\\."),s("span",{style:{color:"#032F62"}},"css"),s("span",{style:{color:"#D73A49"}},"$"),s("span",{style:{color:"#032F62"}},"/"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        use: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"          "),s("span",{style:{color:"#6A737D"}},'// "style-loader",')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"          MiniCssExtractPlugin.loader,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"          "),s("span",{style:{color:"#032F62"}},'"css-loader"'),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  plugins: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"new"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"HtmlWebpackPlugin"),s("span",{style:{color:"#24292E"}},"({")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      template: "),s("span",{style:{color:"#032F62"}},'"./src/index.html"'),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    }),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"new"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"MiniCssExtractPlugin"),s("span",{style:{color:"#24292E"}},"({")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      filename: "),s("span",{style:{color:"#032F62"}},'"css/main.css"'),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    }),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  mode: "),s("span",{style:{color:"#032F62"}},'"development"'),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"};")])])]),s("button",{class:"collapse"})],-1),O=s("p",null,"从配置中我们看到，mini-css-extract-plugin 使用时需要在 loader 和 plugins 中同时使用。在 loader 中 css-loader 的作用是将 CSS 打包编译后文件整合到 js 中，style-loader 的作用是创建 style 标签将样式放入 head 中。而 MiniCssExtractPlugin.loader 会帮我们提取 js 中的 CSS 成单独文件，并在 head 中插入样式，所以不需要再使用 style-loader 了。在 plugins 里我们也同样使用了 mini-css-extract-plugin，使用时参数 filename 可以配置打包后 CSS 文件的路径和名称。配置完成后我们打包看一下：",-1),M=s("img",{src:b,alt:"webpackProCssIndependence"},null,-1),J=s("p",null,"我们发现，在打包后的文件目录中，CSS 已经独立成一个文件，在 js 文件中也没有 CSS 样式的源代码了，index.html 文件中 CSS 样式用 link 标签引入，并且所有的 CSS 被整合在一个文件中。我们打开浏览器后，之前写的样式依然生效，Element 中的样式不见了，取而代之的是 link 标签，Network 中也能看到样式文件的获取。",-1),X=s("img",{src:C,alt:"webpackProCssNetwork"},null,-1),U={id:"css-兼容性处理",tabindex:"-1"},V=s("p",null,"处理 CSS 兼容性问题，我们需要使用到 postcss 这个库，具体到 webpack 配置中便是需要使用 postcss-loader 和 postcss-preset-env 这两个包。下载好包后我们进行配置，配置有两种写法，我们先看第一种。",-1),I=s("div",{class:"language-javascript"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"javascript"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#79B8FF"}},"module"),s("span",{style:{color:"#E1E4E8"}},"."),s("span",{style:{color:"#79B8FF"}},"exports"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  "),s("span",{style:{color:"#F97583"}},"..."),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#6A737D"}},"// 此处省略其他配置")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  "),s("span",{style:{color:"#79B8FF"}},"module"),s("span",{style:{color:"#E1E4E8"}},": {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    rules: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        test:"),s("span",{style:{color:"#DBEDFF"}}," "),s("span",{style:{color:"#9ECBFF"}},"/"),s("span",{style:{color:"#85E89D","font-weight":"bold"}},"\\."),s("span",{style:{color:"#DBEDFF"}},"css"),s("span",{style:{color:"#F97583"}},"$"),s("span",{style:{color:"#9ECBFF"}},"/"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        use: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"          MiniCssExtractPlugin.loader,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"          "),s("span",{style:{color:"#9ECBFF"}},'"css-loader"'),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"          {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"            loader: "),s("span",{style:{color:"#9ECBFF"}},'"postcss-loader"'),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"            options: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"              postcssOptions: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"                plugins: [["),s("span",{style:{color:"#9ECBFF"}},'"postcss-preset-env"'),s("span",{style:{color:"#E1E4E8"}},"]],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"              },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"            },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"          },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"}")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#005CC5"}},"module"),s("span",{style:{color:"#24292E"}},"."),s("span",{style:{color:"#005CC5"}},"exports"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#D73A49"}},"..."),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6A737D"}},"// 此处省略其他配置")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#005CC5"}},"module"),s("span",{style:{color:"#24292E"}},": {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    rules: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        test:"),s("span",{style:{color:"#032F62"}}," /"),s("span",{style:{color:"#22863A","font-weight":"bold"}},"\\."),s("span",{style:{color:"#032F62"}},"css"),s("span",{style:{color:"#D73A49"}},"$"),s("span",{style:{color:"#032F62"}},"/"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        use: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"          MiniCssExtractPlugin.loader,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"          "),s("span",{style:{color:"#032F62"}},'"css-loader"'),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"          {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            loader: "),s("span",{style:{color:"#032F62"}},'"postcss-loader"'),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            options: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"              postcssOptions: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                plugins: [["),s("span",{style:{color:"#032F62"}},'"postcss-preset-env"'),s("span",{style:{color:"#24292E"}},"]],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"              },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"          },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")])])]),s("button",{class:"collapse"})],-1),T=s("p",null,"配置中 postcss-loader 是用来处理 CSS 兼容性的，而 postcss-preset-env 是帮助 postcss 找到 package.json 中 browserslist 里面的配置，通过配置加载指定的 CSS 兼容性样式。所以接下来我们需要在 package.json 文件中配置 browserslist 项。",-1),Z=s("img",{src:g,alt:"webpackProCssBrowserslist"},null,-1),R=s("p",null,[l("在 browserslist 中，development 和 production 分别对应开发环境和生产环境的兼容性配置。配置中 "),s("code",null,"last 1 XXX version"),l(" 代表兼容 XXX 浏览器最近的一个版本，"),s("code",null,">0.2%"),l(" 代表兼容市场占有率大于 0.2% 的浏览器，"),s("code",null,"not dead"),l(" 代表不兼容已经死掉的浏览器（即 24 个月内没有官方支持或更新的浏览器），"),s("code",null,"not op_mini all"),l(" 代表不兼容所有版本的 op_mini（国内基本没人使用）。由于开发环境只用于我们项目开发，所以不用兼容太多浏览器，只要兼容我们平时调试常用的浏览器最近的版本即可，而生产环境为了提高项目的兼容性和稳定性，需要多兼容一些浏览器和版本。")],-1),K=s("p",null,[l("browserslist 中的 development、production 都是取 node 中的环境变量，并不是取 webpack.config.js 中的 mode，而 node 中的环境变量默认是 production。所以我们在开发环境下，需要设置 node 环境变量，可以使用 "),s("code",null,[l("p"),s("wbr"),l("rocess.env.NODE_ENV")]),l(" 来设置（这里仅为了方便验证，以后会出相关文章介绍具体用法）：")],-1),L=s("div",{class:"language-javascript"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"javascript"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},[l("p"),s("wbr"),l("rocess.env.")]),s("span",{style:{color:"#79B8FF"}},"NODE_ENV"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#9ECBFF"}},"'development'"),s("span",{style:{color:"#E1E4E8"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#79B8FF"}},"module"),s("span",{style:{color:"#E1E4E8"}},"."),s("span",{style:{color:"#79B8FF"}},"exports"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  "),s("span",{style:{color:"#F97583"}},"..."),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#6A737D"}},"// 此处省略配置")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"}")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},[l("p"),s("wbr"),l("rocess.env.")]),s("span",{style:{color:"#005CC5"}},"NODE_ENV"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#032F62"}},"'development'"),s("span",{style:{color:"#24292E"}},";")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#005CC5"}},"module"),s("span",{style:{color:"#24292E"}},"."),s("span",{style:{color:"#005CC5"}},"exports"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#D73A49"}},"..."),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6A737D"}},"// 此处省略配置")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")])])]),s("button",{class:"collapse"})],-1),Y=s("p",null,"配置好后我们添加一些需要兼容的 CSS 样式来进行开发环境的兼容验证。",-1),G=s("img",{src:_,alt:"webpackProCompatibleCss"},null,-1),Q=s("p",null,"我们可以通过改变 node 环境变量来观察不同兼容性配置下，CSS 样式被处理的结果。",-1),ss=s("img",{src:k,alt:"webpackProCssCompatibleDist"},null,-1),ls=s("p",null,[l("我们可以看到，由于我们在 development 模式下设置了只兼容常用浏览器最近的一个版本，所以 "),s("code",null,"display: flex"),l(" 打包编译后并没有做兼容性处理。而 production 我们设置兼容的浏览器版本更多，所以 "),s("code",null,"display: flex"),l(" 打包编译后也同样被做了兼容性处理。所以有了 webpack 对 CSS 样式的统一兼容性处理后，大大提高了程序员们的开发效率。")],-1),ns={id:"压缩-css",tabindex:"-1"},os=s("p",null,"我们可以使用 optimize-css-assets-webpack-plugin 插件来压缩 CSS，此插件的使用非常简单，下载好后引入配置文件，并在 plugins 内调用即可：",-1),es=s("div",{class:"language-javascript"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"javascript"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"const"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"OptimizeCssAssetsWebpackPlugin"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"require"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},"'optimize-css-assets-webpack-plugin'"),s("span",{style:{color:"#E1E4E8"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#79B8FF"}},"module"),s("span",{style:{color:"#E1E4E8"}},"."),s("span",{style:{color:"#79B8FF"}},"exports"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  "),s("span",{style:{color:"#F97583"}},"..."),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#6A737D"}},"// 此处省略其他配置")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  plugins: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#F97583"}},"new"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"OptimizeCssAssetsWebpackPlugin"),s("span",{style:{color:"#E1E4E8"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  ]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"}")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"const"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"OptimizeCssAssetsWebpackPlugin"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"require"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},"'optimize-css-assets-webpack-plugin'"),s("span",{style:{color:"#24292E"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#005CC5"}},"module"),s("span",{style:{color:"#24292E"}},"."),s("span",{style:{color:"#005CC5"}},"exports"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#D73A49"}},"..."),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6A737D"}},"// 此处省略其他配置")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  plugins: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"new"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"OptimizeCssAssetsWebpackPlugin"),s("span",{style:{color:"#24292E"}},"()")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  ]")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")])])]),s("button",{class:"collapse"})],-1),as=s("p",null,"配置好后运行打包命令，我们便能看到 CSS 文件的压缩结果。",-1),ts=s("img",{src:B,alt:"webpackProCssCompress"},null,-1),cs=s("p",null,"我们发现，打包编译后的 CSS 文件内容都压缩成了一行，我们这个项目的样式代码比较少，所以压缩程度不明显。在日常开发中，CSS 样式的压缩可以降低文件大小，提升文件请求速度，从而使页面样式更快的渲染出来，提升用户体验。",-1),ps={id:"处理-js-文件",tabindex:"-1"},rs={id:"js-语法检查",tabindex:"-1"},Es=s("p",null,"在日常开发中，为了方便团队的维护，我们希望团队成员所写的代码风格差不多。所以我们就会用到 js 的语法检查，js 语法检查可以规范我们开发时所写的代码风格，如果风格和所配置的不符则会报错。同时 js 语法检查还可以检查一些常见的语法错误，让我们的代码不容易出现常见的错误。",-1),is=s("p",null,"语法检查通常使用的工具是 eslint。在 webpack 中我们需要使用 eslint-loader 库，而 eslint-loader 库又依赖 eslint 库，所以我们需要将两者都下载到项目。后面配置 airbnb 代码风格时，我们还会用到 eslint-config-airbnb-base 库，使用 eslint-config-airbnb-base 库又需要下载 eslint 和 eslint-plugin-import 库。eslint 只用下载一次即可，所以我们这里一共需要下载 eslint、eslint-loader、eslint-config-airbnb-base、eslint-plugin-import 这四个库。",-1),ys=s("p",null,"下载好需要的库后，首先我们先在 package.json 中继承我们的风格（风格配置也可以放到 .eslintrc.js 文件中）：",-1),ds=s("div",{class:"language-json"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"json"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  "),s("span",{style:{color:"#6A737D"}},"// 省略其他配置")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  "),s("span",{style:{color:"#79B8FF"}},'"browserslist"'),s("span",{style:{color:"#E1E4E8"}},": {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#79B8FF"}},'"development"'),s("span",{style:{color:"#E1E4E8"}},": [],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#79B8FF"}},'"production"'),s("span",{style:{color:"#E1E4E8"}},": []")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  "),s("span",{style:{color:"#79B8FF"}},'"eslintConfig"'),s("span",{style:{color:"#E1E4E8"}},": {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#79B8FF"}},'"extends"'),s("span",{style:{color:"#E1E4E8"}},": "),s("span",{style:{color:"#9ECBFF"}},'"airbnb-base"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"}")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#6A737D"}},"// 省略其他配置")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#005CC5"}},'"browserslist"'),s("span",{style:{color:"#24292E"}},": {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#005CC5"}},'"development"'),s("span",{style:{color:"#24292E"}},": [],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#005CC5"}},'"production"'),s("span",{style:{color:"#24292E"}},": []")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#005CC5"}},'"eslintConfig"'),s("span",{style:{color:"#24292E"}},": {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#005CC5"}},'"extends"'),s("span",{style:{color:"#24292E"}},": "),s("span",{style:{color:"#032F62"}},'"airbnb-base"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")])])]),s("button",{class:"collapse"})],-1),Fs=s("p",null,"接下来我们在 webpack.config.js 配置 loader：",-1),us=s("div",{class:"language-javascript"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"javascript"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#79B8FF"}},"module"),s("span",{style:{color:"#E1E4E8"}},"."),s("span",{style:{color:"#79B8FF"}},"exports"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  "),s("span",{style:{color:"#F97583"}},"..."),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#6A737D"}},"// 此处省略其他配置")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}}," rules: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"   				{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        		test:"),s("span",{style:{color:"#DBEDFF"}}," "),s("span",{style:{color:"#9ECBFF"}},"/"),s("span",{style:{color:"#85E89D","font-weight":"bold"}},"\\."),s("span",{style:{color:"#DBEDFF"}},"js"),s("span",{style:{color:"#F97583"}},"$"),s("span",{style:{color:"#9ECBFF"}},"/"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        		exclude:"),s("span",{style:{color:"#DBEDFF"}}," "),s("span",{style:{color:"#9ECBFF"}},"/"),s("span",{style:{color:"#DBEDFF"}},"node_modules"),s("span",{style:{color:"#9ECBFF"}},"/"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        		loader: "),s("span",{style:{color:"#9ECBFF"}},"'eslint-loader'"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        		options: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"          		fix: "),s("span",{style:{color:"#79B8FF"}},"true"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        		},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      	},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"}")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#005CC5"}},"module"),s("span",{style:{color:"#24292E"}},"."),s("span",{style:{color:"#005CC5"}},"exports"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#D73A49"}},"..."),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6A737D"}},"// 此处省略其他配置")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}}," rules: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"   				{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        		test:"),s("span",{style:{color:"#032F62"}}," /"),s("span",{style:{color:"#22863A","font-weight":"bold"}},"\\."),s("span",{style:{color:"#032F62"}},"js"),s("span",{style:{color:"#D73A49"}},"$"),s("span",{style:{color:"#032F62"}},"/"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        		exclude:"),s("span",{style:{color:"#032F62"}}," /node_modules/"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        		loader: "),s("span",{style:{color:"#032F62"}},"'eslint-loader'"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        		options: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"          		fix: "),s("span",{style:{color:"#005CC5"}},"true"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        		},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      	},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")])])]),s("button",{class:"collapse"})],-1),hs=s("p",null,[l("配置中我们匹配了所有 js 文件，node_modules 中的我们下载的第三方库文件也会被检查到。而语法检查只需要检查自己写的源代码，第三方的库是不用检查的，所以这里将 node_modules 排除在外。在大量开发后，语法检测出的错误会有很多，逐个修改很浪费时间和精力，所以我们在 eslint-loader 的配置项内设置了 "),s("code",null,"fix: ture"),l(" ，可以在编译打包时自动修复 eslint 的错误。")],-1),ms={id:"js-兼容性处理",tabindex:"-1"},bs=s("p",null,"目前 ES6 语法已经相当普及，很多开发团队的项目都是使用 ES6 语法的，但是有些浏览器是不识别 ES6 语法的，所以我们需要在打包编译过程中做语法兼容性处理，使我们的代码在生产环境下有很好的兼容性。",-1),Cs=s("p",null,"首先我们在 js 文件中使用一些 ES6 语法，并直接打包编译，看看输出结果会是如何。",-1),gs=s("img",{src:j,alt:"webpackAddJsCompatible"},null,-1),_s=s("p",null,"我们会发现，打包编译后的代码并没有做兼容性处理，依然是 ES6 的语法。所以我们需要用到 babel 来做兼容性处理，在 webpack 中需要使用到 babel-loader 和 @babel/core 库，而后面配置 babel-loader 的预设值时我们会用到 @babel/preset-env 库，所以我们先下载这三个库，然后进行配置：",-1),ks=s("div",{class:"language-javascript"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"javascript"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#79B8FF"}},"module"),s("span",{style:{color:"#E1E4E8"}},"."),s("span",{style:{color:"#79B8FF"}},"exports"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  "),s("span",{style:{color:"#F97583"}},"..."),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#6A737D"}},"// 此处省略其他配置")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}}," rules: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"   				{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        		test:"),s("span",{style:{color:"#DBEDFF"}}," "),s("span",{style:{color:"#9ECBFF"}},"/"),s("span",{style:{color:"#85E89D","font-weight":"bold"}},"\\."),s("span",{style:{color:"#DBEDFF"}},"js"),s("span",{style:{color:"#F97583"}},"$"),s("span",{style:{color:"#9ECBFF"}},"/"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        		exclude:"),s("span",{style:{color:"#DBEDFF"}}," "),s("span",{style:{color:"#9ECBFF"}},"/"),s("span",{style:{color:"#DBEDFF"}},"node_modules"),s("span",{style:{color:"#9ECBFF"}},"/"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        		loader: "),s("span",{style:{color:"#9ECBFF"}},"'babel-loader'"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        		options: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"          		presets: ["),s("span",{style:{color:"#9ECBFF"}},"'@babel/preset-env'"),s("span",{style:{color:"#E1E4E8"}},"],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        		},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      	},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"}")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#005CC5"}},"module"),s("span",{style:{color:"#24292E"}},"."),s("span",{style:{color:"#005CC5"}},"exports"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#D73A49"}},"..."),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6A737D"}},"// 此处省略其他配置")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}}," rules: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"   				{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        		test:"),s("span",{style:{color:"#032F62"}}," /"),s("span",{style:{color:"#22863A","font-weight":"bold"}},"\\."),s("span",{style:{color:"#032F62"}},"js"),s("span",{style:{color:"#D73A49"}},"$"),s("span",{style:{color:"#032F62"}},"/"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        		exclude:"),s("span",{style:{color:"#032F62"}}," /node_modules/"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        		loader: "),s("span",{style:{color:"#032F62"}},"'babel-loader'"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        		options: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"          		presets: ["),s("span",{style:{color:"#032F62"}},"'@babel/preset-env'"),s("span",{style:{color:"#24292E"}},"],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        		},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      	},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")])])]),s("button",{class:"collapse"})],-1),Bs=s("p",null,"这里我们同样需要使用 exclude 排除 node_modules 内的代码不做处理。babel-loader 配置项内的 presets 为预设，用来指示 babel 做怎么样的兼容性处理。这里我们使用了 @babel/preset-env，它可以帮我们做基本的 js 兼容性处理。配置好后我们尝试重新编译打包。",-1),js=s("img",{src:v,alt:"webpackProJsCompatible"},null,-1),vs=s("p",null,"我们发现，打包编译后的代码被编译成 ES5 的语法，这样就可以在更多的浏览器上运行了。但是如果我们加一些比较高级的语法，比如 Promise 之后，编译打包的结果不会做兼容性处理。这时候我们就需要用到 @babel/polyfill 库，它可以帮我们做全部的 js 兼容性处理。这个库不需要设置 webpack，只需要在入口文件引入即可。",-1),fs=s("img",{src:f,alt:"webpackProJsPromise"},null,-1),Ds=s("p",null,"编译完后，我们发现 js 文件会比之前编译的大许多，这是因为文件引入了许多高级语法的兼容。所以使用 @babel/polyfill 后，即使我们只使用了部分需要兼容的语法，它会将所有语法的兼容都引入进来。这导致 js 文件体积太大，降低了加载时的性能。所以我们需要使用一个可以按需加载兼容性的库，core-js 库便可以做到这点。下载好 core-js 库后我们需要修改之前的 loader 配置：",-1),ws=s("div",{class:"language-javascript"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"javascript"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#79B8FF"}},"module"),s("span",{style:{color:"#E1E4E8"}},"."),s("span",{style:{color:"#79B8FF"}},"exports"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  "),s("span",{style:{color:"#F97583"}},"..."),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#6A737D"}},"// 此处省略其他配置")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}}," rules: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"   				{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        		test:"),s("span",{style:{color:"#DBEDFF"}}," "),s("span",{style:{color:"#9ECBFF"}},"/"),s("span",{style:{color:"#85E89D","font-weight":"bold"}},"\\."),s("span",{style:{color:"#DBEDFF"}},"js"),s("span",{style:{color:"#F97583"}},"$"),s("span",{style:{color:"#9ECBFF"}},"/"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        		exclude:"),s("span",{style:{color:"#DBEDFF"}}," "),s("span",{style:{color:"#9ECBFF"}},"/"),s("span",{style:{color:"#DBEDFF"}},"node_modules"),s("span",{style:{color:"#9ECBFF"}},"/"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        		loader: "),s("span",{style:{color:"#9ECBFF"}},"'babel-loader'"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        		options: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"          	presets: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"            		[")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"              		"),s("span",{style:{color:"#9ECBFF"}},"'@babel/preset-env'"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"              		{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"                		useBuiltIns: "),s("span",{style:{color:"#9ECBFF"}},"'usage'"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"                		corejs: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"                  		version: "),s("span",{style:{color:"#79B8FF"}},"3"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"                		},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"                		targets: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"                  		chrome: "),s("span",{style:{color:"#9ECBFF"}},"'60'"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"                  		firefox: "),s("span",{style:{color:"#9ECBFF"}},"'60'"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"                  		ie: "),s("span",{style:{color:"#9ECBFF"}},"'9'"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"                  		safari: "),s("span",{style:{color:"#9ECBFF"}},"'10'"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"                  		edge: "),s("span",{style:{color:"#9ECBFF"}},"'17'"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"                		},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"              		},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"            		],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"          		],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        		},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      	},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"}")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#005CC5"}},"module"),s("span",{style:{color:"#24292E"}},"."),s("span",{style:{color:"#005CC5"}},"exports"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#D73A49"}},"..."),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6A737D"}},"// 此处省略其他配置")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}}," rules: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"   				{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        		test:"),s("span",{style:{color:"#032F62"}}," /"),s("span",{style:{color:"#22863A","font-weight":"bold"}},"\\."),s("span",{style:{color:"#032F62"}},"js"),s("span",{style:{color:"#D73A49"}},"$"),s("span",{style:{color:"#032F62"}},"/"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        		exclude:"),s("span",{style:{color:"#032F62"}}," /node_modules/"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        		loader: "),s("span",{style:{color:"#032F62"}},"'babel-loader'"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        		options: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"          	presets: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            		[")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"              		"),s("span",{style:{color:"#032F62"}},"'@babel/preset-env'"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"              		{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                		useBuiltIns: "),s("span",{style:{color:"#032F62"}},"'usage'"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                		corejs: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                  		version: "),s("span",{style:{color:"#005CC5"}},"3"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                		},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                		targets: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                  		chrome: "),s("span",{style:{color:"#032F62"}},"'60'"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                  		firefox: "),s("span",{style:{color:"#032F62"}},"'60'"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                  		ie: "),s("span",{style:{color:"#032F62"}},"'9'"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                  		safari: "),s("span",{style:{color:"#032F62"}},"'10'"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                  		edge: "),s("span",{style:{color:"#032F62"}},"'17'"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"                		},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"              		},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"            		],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"          		],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        		},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      	},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")])])]),s("button",{class:"collapse"})],-1),xs=s("p",null,[l("其中， "),s("code",null,"useBuiltIns: 'usage' "),l(" 表示按需加载。corejs 为指定 core-js 版本，这里我们使用第三个版本。targets 为指定兼容性做到哪个版本浏览器。当使用完 core-js 库后，@babel/polyfill 库就不用再引入了，将其卸载即可。我们编译打包后，发现 js 文件大小明显比之前全部兼容的方法小了许多，这样既保证了代码的兼容性，又兼顾了代码的加载性能。")],-1),As={id:"js-的压缩",tabindex:"-1"},Ss=s("p",null,"js 的压缩不用我们刻意处理，只需要将 webpack 配置项 mode 改为 production 即可。当 mode 为 production 时，webpack 会启动许多自带的库（webpack 基础学习中有总结），其中 UglifyJsPlugin 会将 js 代码进行压缩。",-1),Ps={id:"处理-html",tabindex:"-1"},$s=s("p",null,"在 webpack 的处理中，html 是不需要做兼容性处理的，只需要将 html 代码进行压缩。压缩 html 只需要在之前配置的 html-webpack-plugin 库内进行配置即可：",-1),Ws=s("div",{class:"language-javascript"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"javascript"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"const"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"HtmlWebpackPlugin"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"require"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#9ECBFF"}},"'html-webpack-plugin'"),s("span",{style:{color:"#E1E4E8"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#79B8FF"}},"module"),s("span",{style:{color:"#E1E4E8"}},"."),s("span",{style:{color:"#79B8FF"}},"exports"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  "),s("span",{style:{color:"#F97583"}},"..."),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#6A737D"}},"// 此处省略其他配置")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}}," plugins: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#F97583"}},"new"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"HtmlWebpackPlugin"),s("span",{style:{color:"#E1E4E8"}},"({")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      template: "),s("span",{style:{color:"#9ECBFF"}},"'./src/index.html'"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      minify: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        collapseWhitespace: "),s("span",{style:{color:"#79B8FF"}},"true"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        removeComments: "),s("span",{style:{color:"#79B8FF"}},"true"),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    }),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"}")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"const"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"HtmlWebpackPlugin"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"require"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#032F62"}},"'html-webpack-plugin'"),s("span",{style:{color:"#24292E"}},");")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#005CC5"}},"module"),s("span",{style:{color:"#24292E"}},"."),s("span",{style:{color:"#005CC5"}},"exports"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#D73A49"}},"..."),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6A737D"}},"// 此处省略其他配置")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}}," plugins: [")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"new"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"HtmlWebpackPlugin"),s("span",{style:{color:"#24292E"}},"({")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      template: "),s("span",{style:{color:"#032F62"}},"'./src/index.html'"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      minify: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        collapseWhitespace: "),s("span",{style:{color:"#005CC5"}},"true"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        removeComments: "),s("span",{style:{color:"#005CC5"}},"true"),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    }),")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  ],")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")])])]),s("button",{class:"collapse"})],-1),qs=s("p",null,"配置中 minify 的值是压缩 html 的配置，collapseWhitespace 表示是否移除空格，removeComments 表示是否移除注释。配置完后我们重新打包，就能看到 html 的压缩效果了。",-1);function Ns(o,zs,Hs,Os,p,Ms){const e=h,r=E;return u(),d(r,{frontmatter:p.frontmatter,data:p.data},{"main-content-md":n(()=>[s("h2",w,[l("前言 "),a(e,{class:"header-anchor",href:"#前言","aria-label":'Permalink to "前言"'},{default:n(()=>[l("​")]),_:1})]),x,A,s("h2",S,[l("处理样式文件 "),a(e,{class:"header-anchor",href:"#处理样式文件","aria-label":'Permalink to "处理样式文件"'},{default:n(()=>[l("​")]),_:1})]),s("h3",P,[l("提取 CSS 成单独文件 "),a(e,{class:"header-anchor",href:"#提取-css-成单独文件","aria-label":'Permalink to "提取 CSS 成单独文件"'},{default:n(()=>[l("​")]),_:1})]),$,W,q,N,z,H,O,M,J,X,s("h3",U,[l("CSS 兼容性处理 "),a(e,{class:"header-anchor",href:"#css-兼容性处理","aria-label":'Permalink to "CSS 兼容性处理"'},{default:n(()=>[l("​")]),_:1})]),V,I,T,Z,R,s("blockquote",null,[s("p",null,[l("注意：browserslist 的配置需要结合项目的使用场景进行考虑。browserslist 还有其他配置方式，具体可以参考 "),a(e,{href:"https://github.com/browserslist/browserslist",target:"_blank",rel:"noreferrer"},{default:n(()=>[l("browserslist")]),_:1}),l(" 。")])]),K,L,Y,G,Q,ss,ls,s("h3",ns,[l("压缩 CSS "),a(e,{class:"header-anchor",href:"#压缩-css","aria-label":'Permalink to "压缩 CSS"'},{default:n(()=>[l("​")]),_:1})]),os,es,as,ts,cs,s("h2",ps,[l("处理 js 文件 "),a(e,{class:"header-anchor",href:"#处理-js-文件","aria-label":'Permalink to "处理 js 文件"'},{default:n(()=>[l("​")]),_:1})]),s("h3",rs,[l("js 语法检查 "),a(e,{class:"header-anchor",href:"#js-语法检查","aria-label":'Permalink to "js 语法检查"'},{default:n(()=>[l("​")]),_:1})]),Es,is,ys,ds,Fs,us,hs,s("blockquote",null,[s("p",null,[l("注意：airbnb 是很著名的一个风格，其中具体的风格写法可以查看 "),a(e,{href:"https://github.com/airbnb/javascript",target:"_blank",rel:"noreferrer"},{default:n(()=>[l("airbnb/javascript")]),_:1}),l(" 。")])]),s("h3",ms,[l("js 兼容性处理 "),a(e,{class:"header-anchor",href:"#js-兼容性处理","aria-label":'Permalink to "js 兼容性处理"'},{default:n(()=>[l("​")]),_:1})]),bs,Cs,gs,_s,ks,Bs,js,vs,fs,Ds,ws,xs,s("blockquote",null,[s("p",null,[l("注意：core-js 的详细用法可以参考 "),a(e,{href:"https://github.com/zloirock/core-js/blob/master/README.md",target:"_blank",rel:"noreferrer"},{default:n(()=>[l("zloirock/core-js")]),_:1}),l(" 。")])]),s("h3",As,[l("js 的压缩 "),a(e,{class:"header-anchor",href:"#js-的压缩","aria-label":'Permalink to "js 的压缩"'},{default:n(()=>[l("​")]),_:1})]),Ss,s("h2",Ps,[l("处理 html "),a(e,{class:"header-anchor",href:"#处理-html","aria-label":'Permalink to "处理 html"'},{default:n(()=>[l("​")]),_:1})]),$s,Ws,qs,s("blockquote",null,[s("p",null,[l("注意：html-webpack-plugin 其他配置可以参考 "),a(e,{href:"https://www.npmjs.com/package/html-webpack-plugin",target:"_blank",rel:"noreferrer"},{default:n(()=>[l("html-webpack-plugin")]),_:1}),l("。")])])]),"main-header":n(()=>[t(o.$slots,"main-header")]),"main-header-after":n(()=>[t(o.$slots,"main-header-after")]),"main-nav":n(()=>[t(o.$slots,"main-nav")]),"main-content":n(()=>[t(o.$slots,"main-content")]),"main-content-after":n(()=>[t(o.$slots,"main-content-after")]),"main-nav-before":n(()=>[t(o.$slots,"main-nav-before")]),"main-nav-after":n(()=>[t(o.$slots,"main-nav-after")]),comment:n(()=>[t(o.$slots,"comment")]),footer:n(()=>[t(o.$slots,"footer")]),aside:n(()=>[t(o.$slots,"aside")]),"aside-custom":n(()=>[t(o.$slots,"aside-custom")]),default:n(()=>[t(o.$slots,"default")]),_:3},8,["frontmatter","data"])}const Rs=i(D,[["render",Ns]]);export{Zs as __pageData,Rs as default};
