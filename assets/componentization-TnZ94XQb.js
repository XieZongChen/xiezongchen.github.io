import{_ as E}from"./ValaxyMain.vue_vue_type_style_index_0_lang-CJwb-j0h.js";import{_ as y,u as i,c as d,w as n,p as u,o as m,a as s,b as l,d as t,r as a,e as F}from"./app-t0WzKcrM.js";import"./YunFooter.vue_vue_type_script_setup_true_lang-CJldLY-7.js";import"./YunCard.vue_vue_type_script_setup_true_lang-CgAMBqk4.js";import"./YunPageHeader.vue_vue_type_script_setup_true_lang-CQr6kV1W.js";import"./index-C7yU5XnD.js";const as=JSON.parse('{"title":"Vue组件化技巧总结","description":"","frontmatter":{"title":"Vue组件化技巧总结","date":"2020-08-08T00:00:00.000Z","categories":["Vue"],"tags":["Vue","组件化"]},"headers":[{"level":2,"title":"前言","slug":"前言","link":"#前言","children":[]},{"level":2,"title":"v-model 数据双向绑定的实现","slug":"v-model-数据双向绑定的实现","link":"#v-model-数据双向绑定的实现","children":[]},{"level":2,"title":"巧用listeners 二次封装组件","slug":"巧用listeners-二次封装组件","link":"#巧用listeners-二次封装组件","children":[]},{"level":2,"title":"provide 和 inject 的响应处理","slug":"provide-和-inject-的响应处理","link":"#provide-和-inject-的响应处理","children":[]},{"level":2,"title":"ElementUI 中的广播和派发","slug":"elementui-中的广播和派发","link":"#elementui-中的广播和派发","children":[]}],"relativePath":"pages/posts/componentization.md","path":"/home/runner/work/xzc-blog/xzc-blog/pages/posts/componentization.md","lastUpdated":1709257929000}'),p=JSON.parse('{"title":"Vue组件化技巧总结","description":"","frontmatter":{"title":"Vue组件化技巧总结","date":"2020-08-08T00:00:00.000Z","categories":["Vue"],"tags":["Vue","组件化"]},"headers":[{"level":2,"title":"前言","slug":"前言","link":"#前言","children":[]},{"level":2,"title":"v-model 数据双向绑定的实现","slug":"v-model-数据双向绑定的实现","link":"#v-model-数据双向绑定的实现","children":[]},{"level":2,"title":"巧用listeners 二次封装组件","slug":"巧用listeners-二次封装组件","link":"#巧用listeners-二次封装组件","children":[]},{"level":2,"title":"provide 和 inject 的响应处理","slug":"provide-和-inject-的响应处理","link":"#provide-和-inject-的响应处理","children":[]},{"level":2,"title":"ElementUI 中的广播和派发","slug":"elementui-中的广播和派发","link":"#elementui-中的广播和派发","children":[]}],"relativePath":"pages/posts/componentization.md","path":"/home/runner/work/xzc-blog/xzc-blog/pages/posts/componentization.md","lastUpdated":1709257929000}'),h={name:"pages/posts/componentization.md",data(){return{data:p,frontmatter:p.frontmatter,$frontmatter:p.frontmatter}},setup(){const o=i();o.meta.frontmatter=Object.assign(o.meta.frontmatter,p.frontmatter),u("pageData",p)}},v={id:"前言",tabindex:"-1"},g=s("p",null,"为了提高编程效率，程序员们总是会将写过的代码进行抽象去业务化并进行抽离，这种“高内聚，低耦合”增加代码复用性的做法久而久之便形成了组件化的思想。组件化能提高开发效率，方便代码的重复使用，简化调试步骤，提升项目的可维护性，便于多人协同开发。而 Vue 中也同样可以用组件化的思想，Vue 的组件系统提供了一种抽象，让我们可以使用独立可复用的组件来构建大型应用，仍以类型的应用界面都可以抽象为一个组件数。这篇文章便是总结了我在 Vue 中进行组件化时的技巧与想法。",-1),A={id:"v-model-数据双向绑定的实现",tabindex:"-1"},D=s("p",null,[l("在开发中，我们经常用到 v-model 属性实现数据的双向绑定，那么在封装自定义组件时，我们如何实现 v-model 的数据双向绑定呢？数据的双向绑定顾名思义，就是当数据发生变化时，绑定的组件要跟着发生变化，反之亦然。这就说明如果一个 input 要实现这个功能，需要实现 "),s("code",null,":value"),l(" 和 "),s("code",null,"@input"),l("。下面假设我们要封装一个自定义 input 组件 x-input：")],-1),C=s("div",{class:"language-vue"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"vue"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"// XInput.vue")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"<"),s("span",{style:{color:"#85E89D"}},"input"),s("span",{style:{color:"#E1E4E8"}}," :"),s("span",{style:{color:"#B392F0"}},"type"),s("span",{style:{color:"#E1E4E8"}},"="),s("span",{style:{color:"#9ECBFF"}},'"'),s("span",{style:{color:"#E1E4E8"}},"type"),s("span",{style:{color:"#9ECBFF"}},'"'),s("span",{style:{color:"#E1E4E8"}}," :"),s("span",{style:{color:"#B392F0"}},"value"),s("span",{style:{color:"#E1E4E8"}},"="),s("span",{style:{color:"#9ECBFF"}},'"'),s("span",{style:{color:"#E1E4E8"}},"value"),s("span",{style:{color:"#9ECBFF"}},'"'),s("span",{style:{color:"#E1E4E8"}}," @"),s("span",{style:{color:"#B392F0"}},"input"),s("span",{style:{color:"#E1E4E8"}},"="),s("span",{style:{color:"#9ECBFF"}},'"'),s("span",{style:{color:"#E1E4E8"}},"onInput"),s("span",{style:{color:"#9ECBFF"}},'"'),s("span",{style:{color:"#E1E4E8"}},">")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"props:{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"	type:{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"		type: String,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"		default: 'text'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"	},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"	value:{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"		type: String,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"		default: ''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"	}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"methods:{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"	onInput(e){")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"		this.$emit('input', e.target.value)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"	}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"}")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"// XInput.vue")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"<"),s("span",{style:{color:"#22863A"}},"input"),s("span",{style:{color:"#24292E"}}," :"),s("span",{style:{color:"#6F42C1"}},"type"),s("span",{style:{color:"#24292E"}},"="),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}},"type"),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}}," :"),s("span",{style:{color:"#6F42C1"}},"value"),s("span",{style:{color:"#24292E"}},"="),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}},"value"),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}}," @"),s("span",{style:{color:"#6F42C1"}},"input"),s("span",{style:{color:"#24292E"}},"="),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}},"onInput"),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}},">")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"props:{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"	type:{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"		type: String,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"		default: 'text'")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"	},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"	value:{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"		type: String,")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"		default: ''")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"	}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"},")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"methods:{")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"	onInput(e){")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"		this.$emit('input', e.target.value)")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"	}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")])])]),s("button",{class:"collapse"})],-1),f=s("p",null,"这样在使用自定义组件时，使用 v-model 便可使数据双向绑定：",-1),B=s("div",{class:"language-vue"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"vue"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"<"),s("span",{style:{color:"#85E89D"}},"x-input"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"v-model"),s("span",{style:{color:"#E1E4E8"}},"="),s("span",{style:{color:"#9ECBFF"}},'"'),s("span",{style:{color:"#E1E4E8"}},"inputValue"),s("span",{style:{color:"#9ECBFF"}},'"'),s("span",{style:{color:"#E1E4E8"}},"></"),s("span",{style:{color:"#85E89D"}},"x-input"),s("span",{style:{color:"#E1E4E8"}},">")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"data(){ return { inputValue: '' } }")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"<"),s("span",{style:{color:"#22863A"}},"x-input"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"v-model"),s("span",{style:{color:"#24292E"}},"="),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}},"inputValue"),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}},"></"),s("span",{style:{color:"#22863A"}},"x-input"),s("span",{style:{color:"#24292E"}},">")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"data(){ return { inputValue: '' } }")])])]),s("button",{class:"collapse"})],-1),_={id:"巧用listeners-二次封装组件",tabindex:"-1"},b=s("span",{class:"katex"},[s("span",{class:"katex-mathml"},[s("math",{xmlns:"http://www.w3.org/1998/Math/MathML"},[s("semantics",null,[s("mrow",null,[s("mi",null,"a"),s("mi",null,"t"),s("mi",null,"t"),s("mi",null,"r"),s("mi",null,"s"),s("mtext",null,"、")]),s("annotation",{encoding:"application/x-tex"},"attrs、")])])]),s("span",{class:"katex-html","aria-hidden":"true"},[s("span",{class:"base"},[s("span",{class:"strut",style:{height:"0.6833em"}}),s("span",{class:"mord mathnormal"},"a"),s("span",{class:"mord mathnormal"},"tt"),s("span",{class:"mord mathnormal"},"rs"),s("span",{class:"mord cjk_fallback"},"、")])])],-1),k=s("p",null,[l("在平常的开发中，有许多贴近业务场景但大量重复出现的业务组件，这些组件又是基于现有组件库（比如 ElementUI）的。这种情况下就需要我们对组件库进行二次封装。组件库中的组件提供了很多属性和方法，在二次封装时如果使用 props 传递将会使代码变的臃肿而不优雅，这就需要用到 "),s("code",null,"$attrs"),l("、"),s("code",null,"$listeners"),l(" 了。"),s("code",null,"$attrs"),l("、"),s("code",null,"$listeners"),l(" 包含了父作用域中不作为 prop 被识别（且获取）的特性绑定（class 和 style 除外），当一个组件没有声明任何 prop 时，这里会包含所有父作用域的绑定（class 和 style 除外），并且可以通过 "),s("code",null,' v-bind="$attrs"'),l(" 和 "),s("code",null,'v-on="$listeners"'),l(" 传入内部组件。")],-1),N=s("p",null,"假设我们现在要对 ElementUI 中的 Input 组件进行二次封装，封装成新的 x-input：",-1),$=s("div",{class:"language-vue"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"vue"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"// XInput.vue")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"<"),s("span",{style:{color:"#85E89D"}},"el-input"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"v-bind"),s("span",{style:{color:"#E1E4E8"}},"="),s("span",{style:{color:"#9ECBFF"}},'"'),s("span",{style:{color:"#E1E4E8"}},"$attrs"),s("span",{style:{color:"#9ECBFF"}},'"'),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"v-on"),s("span",{style:{color:"#E1E4E8"}},"="),s("span",{style:{color:"#9ECBFF"}},'"'),s("span",{style:{color:"#E1E4E8"}},"$listeners"),s("span",{style:{color:"#9ECBFF"}},'"'),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"v-if"),s("span",{style:{color:"#E1E4E8"}},"="),s("span",{style:{color:"#9ECBFF"}},'"'),s("span",{style:{color:"#E1E4E8"}},"isShow"),s("span",{style:{color:"#9ECBFF"}},'"'),s("span",{style:{color:"#E1E4E8"}},"></"),s("span",{style:{color:"#85E89D"}},"el-input"),s("span",{style:{color:"#E1E4E8"}},">")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"props:{ isShow:{ type: Boolean, default: true } }")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"// XInput.vue")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"<"),s("span",{style:{color:"#22863A"}},"el-input"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"v-bind"),s("span",{style:{color:"#24292E"}},"="),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}},"$attrs"),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"v-on"),s("span",{style:{color:"#24292E"}},"="),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}},"$listeners"),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"v-if"),s("span",{style:{color:"#24292E"}},"="),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}},"isShow"),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}},"></"),s("span",{style:{color:"#22863A"}},"el-input"),s("span",{style:{color:"#24292E"}},">")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"props:{ isShow:{ type: Boolean, default: true } }")])])]),s("button",{class:"collapse"})],-1),x=s("p",null,[l("我们假设 x-input 要提供一个我们自己的 is-show 属性，而 el-input 其余的属性和方法需要仍然可用。这里使用 "),s("code",null,"$attrs"),l("、"),s("code",null,"$listeners"),l(" 后，你会发现代码变的很优雅，不需要使用 props 将 el-input 原有的属性和方法，从 x-input 中一个一个的传递下去。我们不但可以使用自己封装的属性，还可以正常的使用 el-input 原有的属性和方法：")],-1),w=s("div",{class:"language-vue"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"vue"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"<"),s("span",{style:{color:"#85E89D"}},"x-input")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  "),s("span",{style:{color:"#B392F0"}},"placeholder"),s("span",{style:{color:"#E1E4E8"}},"="),s("span",{style:{color:"#9ECBFF"}},'"请输入密码"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  "),s("span",{style:{color:"#B392F0"}},"v-model"),s("span",{style:{color:"#E1E4E8"}},"="),s("span",{style:{color:"#9ECBFF"}},'"'),s("span",{style:{color:"#E1E4E8"}},"input"),s("span",{style:{color:"#9ECBFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  "),s("span",{style:{color:"#B392F0"}},"show-password")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  :"),s("span",{style:{color:"#B392F0"}},"is-show"),s("span",{style:{color:"#E1E4E8"}},"="),s("span",{style:{color:"#9ECBFF"}},'"'),s("span",{style:{color:"#79B8FF"}},"false"),s("span",{style:{color:"#9ECBFF"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"</"),s("span",{style:{color:"#85E89D"}},"x-input"),s("span",{style:{color:"#E1E4E8"}},">")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"<"),s("span",{style:{color:"#22863A"}},"x-input")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#6F42C1"}},"placeholder"),s("span",{style:{color:"#24292E"}},"="),s("span",{style:{color:"#032F62"}},'"请输入密码"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#6F42C1"}},"v-model"),s("span",{style:{color:"#24292E"}},"="),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}},"input"),s("span",{style:{color:"#032F62"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#6F42C1"}},"show-password")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  :"),s("span",{style:{color:"#6F42C1"}},"is-show"),s("span",{style:{color:"#24292E"}},"="),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#005CC5"}},"false"),s("span",{style:{color:"#032F62"}},'"')]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},">")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"</"),s("span",{style:{color:"#22863A"}},"x-input"),s("span",{style:{color:"#24292E"}},">")])])]),s("button",{class:"collapse"})],-1),j=s("p",null,[l("当使用我们二次封装的组件 x-input 时，查看组件的 DOM 会发现组件的根标签上有许多属性导致看起来很乱，这是因为 Vue 默认会将继承下来的特性会在根标签上展开显示。如果我们不想让它们显示在根标签上，可以使用 "),s("code",null,"inheritAttrs"),l(" 将其关闭：")],-1),V=s("div",{class:"language-vue"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"vue"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"// XInput.vue")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"<"),s("span",{style:{color:"#85E89D"}},"el-input"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"v-bind"),s("span",{style:{color:"#E1E4E8"}},"="),s("span",{style:{color:"#9ECBFF"}},'"'),s("span",{style:{color:"#E1E4E8"}},"$attrs"),s("span",{style:{color:"#9ECBFF"}},'"'),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"v-on"),s("span",{style:{color:"#E1E4E8"}},"="),s("span",{style:{color:"#9ECBFF"}},'"'),s("span",{style:{color:"#E1E4E8"}},"$listeners"),s("span",{style:{color:"#9ECBFF"}},'"'),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"v-if"),s("span",{style:{color:"#E1E4E8"}},"="),s("span",{style:{color:"#9ECBFF"}},'"'),s("span",{style:{color:"#E1E4E8"}},"isShow"),s("span",{style:{color:"#9ECBFF"}},'"'),s("span",{style:{color:"#E1E4E8"}},"></"),s("span",{style:{color:"#85E89D"}},"el-input"),s("span",{style:{color:"#E1E4E8"}},">")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"export default{ inheritAttrs: false, props:{ isShow:{ type: Boolean, default:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"true } } }")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"// XInput.vue")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"<"),s("span",{style:{color:"#22863A"}},"el-input"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"v-bind"),s("span",{style:{color:"#24292E"}},"="),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}},"$attrs"),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"v-on"),s("span",{style:{color:"#24292E"}},"="),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}},"$listeners"),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"v-if"),s("span",{style:{color:"#24292E"}},"="),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}},"isShow"),s("span",{style:{color:"#032F62"}},'"'),s("span",{style:{color:"#24292E"}},"></"),s("span",{style:{color:"#22863A"}},"el-input"),s("span",{style:{color:"#24292E"}},">")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"export default{ inheritAttrs: false, props:{ isShow:{ type: Boolean, default:")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"true } } }")])])]),s("button",{class:"collapse"})],-1),I={id:"provide-和-inject-的响应处理",tabindex:"-1"},S=s("p",null,"在组件封装过程中，无可避免的会遇到数据的跨层级传递，官方为我们提供了 provide 和 inject 来实现数据的跨层级传递。这对选项需要一起使用，以允许一个祖先组件向其所有子孙后代注入一个依赖，不论组件层次有多深，并在其上下游关系成立的时间里始终生效。而官方最后有这样一段提示：",-1),z=s("div",{class:"tip custom-block"},[s("p",{class:"custom-block-title"},[s("span",{lang:"en"},"TIP"),s("span",{lang:"zh-CN"},"提示")]),s("p",null,[l("提示："),s("code",null,"provide"),l(" 和 "),s("code",null,"inject"),l(" 绑定并不是可响应的。这是刻意为之的。然而，如果你传入了一个可监听的对象，那么其对象的 property 还是可响应的。")])],-1),U=s("p",null,"那么我们如何让它们绑定变成可响应式呢？通过观察我们发现，官方有提到我们如果想实现绑定可响应，需要传入一个可监听的对象。我们当然可以实现一个响应式的对象来进行传递，但如果你嫌那样麻烦，可以传递当前组件实例，每个组件自身其实就是一个可监听的对象，我们可以通过传递组件实例自身来实现这个功能：",-1),P=s("div",{class:"language-javascript"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"javascript"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// ancestor.vue")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"export"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"default"),s("span",{style:{color:"#E1E4E8"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  "),s("span",{style:{color:"#B392F0"}},"provide"),s("span",{style:{color:"#E1E4E8"}},"() {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#F97583"}},"return"),s("span",{style:{color:"#E1E4E8"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      msg: "),s("span",{style:{color:"#79B8FF"}},"this"),s("span",{style:{color:"#E1E4E8"}},", "),s("span",{style:{color:"#6A737D"}},"// 这里将当前组件实例传递出去")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    };")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  "),s("span",{style:{color:"#B392F0"}},"data"),s("span",{style:{color:"#E1E4E8"}},"() {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#F97583"}},"return"),s("span",{style:{color:"#E1E4E8"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      value: "),s("span",{style:{color:"#9ECBFF"}},'""'),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    };")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"};")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// ancestor.vue")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"export"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"default"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#6F42C1"}},"provide"),s("span",{style:{color:"#24292E"}},"() {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      msg: "),s("span",{style:{color:"#005CC5"}},"this"),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#6A737D"}},"// 这里将当前组件实例传递出去")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    };")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#6F42C1"}},"data"),s("span",{style:{color:"#24292E"}},"() {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      value: "),s("span",{style:{color:"#032F62"}},'""'),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    };")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"};")])])]),s("button",{class:"collapse"})],-1),X=s("p",null,"如果你传递了组件实例，那么这样可以接收数据和使用数据：",-1),M=s("div",{class:"language-vue"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"vue"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"// child.vue")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"<"),s("span",{style:{color:"#85E89D"}},"p"),s("span",{style:{color:"#E1E4E8"}},">{{msg.value}}</"),s("span",{style:{color:"#85E89D"}},"p"),s("span",{style:{color:"#E1E4E8"}},">")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},'export default{ inject: ["msg"] }')])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"// child.vue")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"<"),s("span",{style:{color:"#22863A"}},"p"),s("span",{style:{color:"#24292E"}},">{{msg.value}}</"),s("span",{style:{color:"#22863A"}},"p"),s("span",{style:{color:"#24292E"}},">")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},'export default{ inject: ["msg"] }')])])]),s("button",{class:"collapse"})],-1),O={id:"elementui-中的广播和派发",tabindex:"-1"},T=s("p",null,"当我们在封装自定义组件时，事件的广播和派发一直是令人头疼的问题，因为这里如果处理不到位，将会造成组件之间耦合度很高通用性变差，而且代码的健壮性会大大降低。而 ElementUI 对此给出了一种很好的解决办法——混入广播方法和派发方法。我们来看一下是怎么实现的：",-1),J=s("div",{class:"language-javascript"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"javascript"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// src/mixins/emitter.js")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"/**")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}}," * 广播方法：从根组件向下广播事件（自上而下）")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}}," * componentName:组件名称")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}}," * eventName:事件名称")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}}," * params:参数数组")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}}," */")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"function"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#B392F0"}},"broadcast"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#FFAB70"}},"componentName"),s("span",{style:{color:"#E1E4E8"}},", "),s("span",{style:{color:"#FFAB70"}},"eventName"),s("span",{style:{color:"#E1E4E8"}},", "),s("span",{style:{color:"#FFAB70"}},"params"),s("span",{style:{color:"#E1E4E8"}},") {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  "),s("span",{style:{color:"#6A737D"}},"//遍历所有子元素")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  "),s("span",{style:{color:"#79B8FF"}},"this"),s("span",{style:{color:"#E1E4E8"}},".$children."),s("span",{style:{color:"#B392F0"}},"forEach"),s("span",{style:{color:"#E1E4E8"}},"(("),s("span",{style:{color:"#FFAB70"}},"child"),s("span",{style:{color:"#E1E4E8"}},") "),s("span",{style:{color:"#F97583"}},"=>"),s("span",{style:{color:"#E1E4E8"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#F97583"}},"var"),s("span",{style:{color:"#E1E4E8"}}," name "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," child.$options.componentName;")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#6A737D"}},"//如果子元素componentName和传入的相同则派发事件")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#F97583"}},"if"),s("span",{style:{color:"#E1E4E8"}}," (name "),s("span",{style:{color:"#F97583"}},"==="),s("span",{style:{color:"#E1E4E8"}}," componentName) {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      child.$emit."),s("span",{style:{color:"#B392F0"}},"apply"),s("span",{style:{color:"#E1E4E8"}},"(child, [eventName]."),s("span",{style:{color:"#B392F0"}},"concat"),s("span",{style:{color:"#E1E4E8"}},"(params));")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    } "),s("span",{style:{color:"#F97583"}},"else"),s("span",{style:{color:"#E1E4E8"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      "),s("span",{style:{color:"#6A737D"}},"//递归树形向下遍历")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      broadcast."),s("span",{style:{color:"#B392F0"}},"apply"),s("span",{style:{color:"#E1E4E8"}},"(child, [componentName, eventName]."),s("span",{style:{color:"#B392F0"}},"concat"),s("span",{style:{color:"#E1E4E8"}},"([params]));")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  });")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"export"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"default"),s("span",{style:{color:"#E1E4E8"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  methods: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#6A737D"}},"/**")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * 冒泡（自下而上）查找componentName相同的组件并派发事件")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * componentName:组件名称")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * eventName:事件名称")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * params:参数数组")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     */")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#B392F0"}},"dispatch"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#FFAB70"}},"componentName"),s("span",{style:{color:"#E1E4E8"}},", "),s("span",{style:{color:"#FFAB70"}},"eventName"),s("span",{style:{color:"#E1E4E8"}},", "),s("span",{style:{color:"#FFAB70"}},"params"),s("span",{style:{color:"#E1E4E8"}},") {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      "),s("span",{style:{color:"#F97583"}},"var"),s("span",{style:{color:"#E1E4E8"}}," parent "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"this"),s("span",{style:{color:"#E1E4E8"}},".$parent "),s("span",{style:{color:"#F97583"}},"||"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#79B8FF"}},"this"),s("span",{style:{color:"#E1E4E8"}},".$root;")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      "),s("span",{style:{color:"#F97583"}},"var"),s("span",{style:{color:"#E1E4E8"}}," name "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," parent.$options.componentName;")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      "),s("span",{style:{color:"#6A737D"}},"//向上查找直到找到相同名称的组件")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      "),s("span",{style:{color:"#F97583"}},"while"),s("span",{style:{color:"#E1E4E8"}}," (parent "),s("span",{style:{color:"#F97583"}},"&&"),s("span",{style:{color:"#E1E4E8"}}," ("),s("span",{style:{color:"#F97583"}},"!"),s("span",{style:{color:"#E1E4E8"}},"name "),s("span",{style:{color:"#F97583"}},"||"),s("span",{style:{color:"#E1E4E8"}}," name "),s("span",{style:{color:"#F97583"}},"!=="),s("span",{style:{color:"#E1E4E8"}}," componentName)) {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        parent "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," parent.$parent;")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        "),s("span",{style:{color:"#F97583"}},"if"),s("span",{style:{color:"#E1E4E8"}}," (parent) {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"          name "),s("span",{style:{color:"#F97583"}},"="),s("span",{style:{color:"#E1E4E8"}}," parent.$options.componentName;")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      "),s("span",{style:{color:"#6A737D"}},"// 如果找到就派发事件")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      "),s("span",{style:{color:"#F97583"}},"if"),s("span",{style:{color:"#E1E4E8"}}," (parent) {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"        parent.$emit."),s("span",{style:{color:"#B392F0"}},"apply"),s("span",{style:{color:"#E1E4E8"}},"(parent, [eventName]."),s("span",{style:{color:"#B392F0"}},"concat"),s("span",{style:{color:"#E1E4E8"}},"(params));")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    },")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#6A737D"}},"//这里保证广播方法的this指向")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#B392F0"}},"broadcast"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#FFAB70"}},"componentName"),s("span",{style:{color:"#E1E4E8"}},", "),s("span",{style:{color:"#FFAB70"}},"eventName"),s("span",{style:{color:"#E1E4E8"}},", "),s("span",{style:{color:"#FFAB70"}},"params"),s("span",{style:{color:"#E1E4E8"}},") {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      broadcast."),s("span",{style:{color:"#B392F0"}},"call"),s("span",{style:{color:"#E1E4E8"}},"("),s("span",{style:{color:"#79B8FF"}},"this"),s("span",{style:{color:"#E1E4E8"}},", componentName, eventName, params);")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"};")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// src/mixins/emitter.js")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"/**")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}}," * 广播方法：从根组件向下广播事件（自上而下）")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}}," * componentName:组件名称")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}}," * eventName:事件名称")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}}," * params:参数数组")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}}," */")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"function"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#6F42C1"}},"broadcast"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#E36209"}},"componentName"),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#E36209"}},"eventName"),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#E36209"}},"params"),s("span",{style:{color:"#24292E"}},") {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#6A737D"}},"//遍历所有子元素")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#005CC5"}},"this"),s("span",{style:{color:"#24292E"}},".$children."),s("span",{style:{color:"#6F42C1"}},"forEach"),s("span",{style:{color:"#24292E"}},"(("),s("span",{style:{color:"#E36209"}},"child"),s("span",{style:{color:"#24292E"}},") "),s("span",{style:{color:"#D73A49"}},"=>"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"var"),s("span",{style:{color:"#24292E"}}," name "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," child.$options.componentName;")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#6A737D"}},"//如果子元素componentName和传入的相同则派发事件")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," (name "),s("span",{style:{color:"#D73A49"}},"==="),s("span",{style:{color:"#24292E"}}," componentName) {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      child.$emit."),s("span",{style:{color:"#6F42C1"}},"apply"),s("span",{style:{color:"#24292E"}},"(child, [eventName]."),s("span",{style:{color:"#6F42C1"}},"concat"),s("span",{style:{color:"#24292E"}},"(params));")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    } "),s("span",{style:{color:"#D73A49"}},"else"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      "),s("span",{style:{color:"#6A737D"}},"//递归树形向下遍历")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      broadcast."),s("span",{style:{color:"#6F42C1"}},"apply"),s("span",{style:{color:"#24292E"}},"(child, [componentName, eventName]."),s("span",{style:{color:"#6F42C1"}},"concat"),s("span",{style:{color:"#24292E"}},"([params]));")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  });")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"}")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"export"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"default"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  methods: {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#6A737D"}},"/**")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * 冒泡（自下而上）查找componentName相同的组件并派发事件")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * componentName:组件名称")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * eventName:事件名称")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     * params:参数数组")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"     */")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#6F42C1"}},"dispatch"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#E36209"}},"componentName"),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#E36209"}},"eventName"),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#E36209"}},"params"),s("span",{style:{color:"#24292E"}},") {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      "),s("span",{style:{color:"#D73A49"}},"var"),s("span",{style:{color:"#24292E"}}," parent "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"this"),s("span",{style:{color:"#24292E"}},".$parent "),s("span",{style:{color:"#D73A49"}},"||"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#005CC5"}},"this"),s("span",{style:{color:"#24292E"}},".$root;")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      "),s("span",{style:{color:"#D73A49"}},"var"),s("span",{style:{color:"#24292E"}}," name "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," parent.$options.componentName;")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      "),s("span",{style:{color:"#6A737D"}},"//向上查找直到找到相同名称的组件")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      "),s("span",{style:{color:"#D73A49"}},"while"),s("span",{style:{color:"#24292E"}}," (parent "),s("span",{style:{color:"#D73A49"}},"&&"),s("span",{style:{color:"#24292E"}}," ("),s("span",{style:{color:"#D73A49"}},"!"),s("span",{style:{color:"#24292E"}},"name "),s("span",{style:{color:"#D73A49"}},"||"),s("span",{style:{color:"#24292E"}}," name "),s("span",{style:{color:"#D73A49"}},"!=="),s("span",{style:{color:"#24292E"}}," componentName)) {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        parent "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," parent.$parent;")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," (parent) {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"          name "),s("span",{style:{color:"#D73A49"}},"="),s("span",{style:{color:"#24292E"}}," parent.$options.componentName;")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      "),s("span",{style:{color:"#6A737D"}},"// 如果找到就派发事件")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      "),s("span",{style:{color:"#D73A49"}},"if"),s("span",{style:{color:"#24292E"}}," (parent) {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"        parent.$emit."),s("span",{style:{color:"#6F42C1"}},"apply"),s("span",{style:{color:"#24292E"}},"(parent, [eventName]."),s("span",{style:{color:"#6F42C1"}},"concat"),s("span",{style:{color:"#24292E"}},"(params));")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      }")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    },")]),l(`
`),s("span",{class:"line"}),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#6A737D"}},"//这里保证广播方法的this指向")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#6F42C1"}},"broadcast"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#E36209"}},"componentName"),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#E36209"}},"eventName"),s("span",{style:{color:"#24292E"}},", "),s("span",{style:{color:"#E36209"}},"params"),s("span",{style:{color:"#24292E"}},") {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      broadcast."),s("span",{style:{color:"#6F42C1"}},"call"),s("span",{style:{color:"#24292E"}},"("),s("span",{style:{color:"#005CC5"}},"this"),s("span",{style:{color:"#24292E"}},", componentName, eventName, params);")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"};")])])]),s("button",{class:"collapse"})],-1),L=s("p",null,[l("在组件内使用 "),s("code",null,"mixins"),l(" 混入 emitter.js 文件便可直接使用这两个方法进行事件的广播和派发。需要注意的是，使用时我们想要响应的组件必须设置 "),s("code",null,"componentName"),l("：")],-1),Z=s("div",{class:"language-javascript"},[s("button",{title:"Copy Code",class:"copy"}),s("span",{class:"lang"},"javascript"),s("pre",{class:"shiki github-dark vp-code-dark"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// Example.vue")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#F97583"}},"export"),s("span",{style:{color:"#E1E4E8"}}," "),s("span",{style:{color:"#F97583"}},"default"),s("span",{style:{color:"#E1E4E8"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  componentName: "),s("span",{style:{color:"#9ECBFF"}},'"Example"'),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  "),s("span",{style:{color:"#B392F0"}},"data"),s("span",{style:{color:"#E1E4E8"}},"() {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    "),s("span",{style:{color:"#F97583"}},"return"),s("span",{style:{color:"#E1E4E8"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"      example: "),s("span",{style:{color:"#9ECBFF"}},'""'),s("span",{style:{color:"#E1E4E8"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"    };")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"  },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#E1E4E8"}},"};")])])]),s("pre",{class:"shiki github-light vp-code-light"},[s("code",null,[s("span",{class:"line"},[s("span",{style:{color:"#6A737D"}},"// Example.vue")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#D73A49"}},"export"),s("span",{style:{color:"#24292E"}}," "),s("span",{style:{color:"#D73A49"}},"default"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  componentName: "),s("span",{style:{color:"#032F62"}},'"Example"'),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  "),s("span",{style:{color:"#6F42C1"}},"data"),s("span",{style:{color:"#24292E"}},"() {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    "),s("span",{style:{color:"#D73A49"}},"return"),s("span",{style:{color:"#24292E"}}," {")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"      example: "),s("span",{style:{color:"#032F62"}},'""'),s("span",{style:{color:"#24292E"}},",")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"    };")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"  },")]),l(`
`),s("span",{class:"line"},[s("span",{style:{color:"#24292E"}},"};")])])]),s("button",{class:"collapse"})],-1),q=s("blockquote",null,[s("p",null,"由于时间不足，先写到这里，今后会慢慢补充！")],-1);function R(o,G,H,K,c,Q){const e=F,r=E;return m(),d(r,{frontmatter:c.frontmatter,data:c.data},{"main-content-md":n(()=>[s("h2",v,[l("前言 "),t(e,{class:"header-anchor",href:"#前言","aria-label":'Permalink to "前言"'},{default:n(()=>[l("​")]),_:1})]),g,s("h2",A,[l("v-model 数据双向绑定的实现 "),t(e,{class:"header-anchor",href:"#v-model-数据双向绑定的实现","aria-label":'Permalink to "v-model 数据双向绑定的实现"'},{default:n(()=>[l("​")]),_:1})]),D,C,f,B,s("h2",_,[l("巧用"),b,l("listeners 二次封装组件 "),t(e,{class:"header-anchor",href:"#巧用listeners-二次封装组件","aria-label":'Permalink to "巧用$attrs、$listeners 二次封装组件"'},{default:n(()=>[l("​")]),_:1})]),k,N,$,x,w,j,V,s("h2",I,[l("provide 和 inject 的响应处理 "),t(e,{class:"header-anchor",href:"#provide-和-inject-的响应处理","aria-label":'Permalink to "provide 和 inject 的响应处理"'},{default:n(()=>[l("​")]),_:1})]),S,z,U,P,X,M,s("h2",O,[l("ElementUI 中的广播和派发 "),t(e,{class:"header-anchor",href:"#elementui-中的广播和派发","aria-label":'Permalink to "ElementUI 中的广播和派发"'},{default:n(()=>[l("​")]),_:1})]),T,J,L,Z,q]),"main-header":n(()=>[a(o.$slots,"main-header")]),"main-header-after":n(()=>[a(o.$slots,"main-header-after")]),"main-nav":n(()=>[a(o.$slots,"main-nav")]),"main-content":n(()=>[a(o.$slots,"main-content")]),"main-content-after":n(()=>[a(o.$slots,"main-content-after")]),"main-nav-before":n(()=>[a(o.$slots,"main-nav-before")]),"main-nav-after":n(()=>[a(o.$slots,"main-nav-after")]),comment:n(()=>[a(o.$slots,"comment")]),footer:n(()=>[a(o.$slots,"footer")]),aside:n(()=>[a(o.$slots,"aside")]),"aside-custom":n(()=>[a(o.$slots,"aside-custom")]),default:n(()=>[a(o.$slots,"default")]),_:3},8,["frontmatter","data"])}const es=y(h,[["render",R]]);export{as as __pageData,es as default};
